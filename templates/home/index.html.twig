{% extends 'base.html.twig' %}

{% block title %}Accueil{% endblock %}

{% block body %}

<div class="container mt-5">

    <h1 class="mb-4">Bienvenue, {{ app.user ? app.user.email|split('@')[0] : 'visiteur' }}</h1>


    {% if is_granted('ROLE_ADMIN') %}

        <!-- =============================== -->
        <!--        ADMIN DASHBOARD          -->
        <!-- =============================== -->

        <div class="card bg-dark text-white p-4 mb-4">
            <h3>Gestion des collections</h3>
            <p>Consultez et gérez toutes les collections existantes.</p>

            <a href="/admin?crudAction=index&crudControllerFqcn=App\\Controller\\Admin\\CollectionVoituresCrudController"
               class="btn btn-primary mt-2">
                Voir toutes les collections →
            </a>
        </div>


        <div class="card bg-primary text-white p-4">
            <h3>Gestion des galeries</h3>
            <p>Consultez et administrez toutes les galeries, publiques ou privées.</p>

            <a href="/admin?crudAction=index&crudControllerFqcn=App\\Controller\\Admin\\GalerieCrudController"
               class="btn btn-light mt-2">
                Voir toutes les galeries →
            </a>
        </div>


    {% else %}

        <!-- =============================== -->
        <!--        NORMAL USER DASHBOARD    -->
        <!-- =============================== -->

        <div class="card bg-dark text-white p-4 mb-4">
            <h3>Votre collection de voitures</h3>

            {% if app.user and app.user.collectionVoitures %}
                <a href="{{ path('collection_voitures_show', {id: app.user.collectionVoitures.id}) }}"
                   class="btn btn-success mt-2">
                    Voir votre collection →
                </a>
            {% else %}
                <a href="{{ path('collection_voitures_new') }}"
                   class="btn btn-success mt-2">
                    Créer votre collection →
                </a>
            {% endif %}
        </div>


        <div class="card bg-primary text-white p-4">
            <h3>Vos galeries</h3>

            {% if app.user and app.user.galeries|length > 0 %}
                <a href="{{ path('app_galerie_mine') }}"
                   class="btn btn-light mt-2">
                    Voir vos galeries →
                </a>
            {% else %}
                <p>Vous n'avez encore aucune galerie.</p>
                <a href="{{ path('app_galerie_new') }}"
                   class="btn btn-light mt-2">
                    Créer une galerie →
                </a>
            {% endif %}
        </div>

    {% endif %}

</div>

{% endblock %}
